import{o as s,g as l,b as o,d as U,c as k,u as n,h as x,r as Y,n as S,w as _,a as i,e as C,t as a,l as Z,i as j,bo as p,F as d,Z as ee,k as te,b4 as D,m as J}from"./app-DFNFXxLc.js";import{r as se,_ as ne,c as K}from"./NoLayout.vue_vue_type_script_setup_true_lang-DUNHjSsW.js";import{_ as B}from"./VButton.vue_vue_type_script_setup_true_lang-4xu5Xl2d.js";import{_ as ae}from"./VNumberInput.vue_vue_type_script_setup_true_lang-Co9H_L84.js";import{_ as P}from"./VStretchedButton.vue_vue_type_script_setup_true_lang-DwYSnxu0.js";import{_ as le}from"./ClothingCard.vue_vue_type_script_setup_true_lang-DZ7iF53v.js";import{_ as oe}from"./VTag.vue_vue_type_script_setup_true_lang-CYcPrYNJ.js";import{H as re}from"./HangerIcon-CvtA8XtD.js";import{d as ie}from"./dressing-BmchCSS1.js";import{u as ue}from"./useClothesCategories-CeUMBG1P.js";import{r as T}from"./ArrowRightIcon-C1a11LtA.js";import{r as N}from"./CheckIcon-dVsmu3Dd.js";import{r as ce}from"./PencilIcon-Cy1XJcO2.js";import"./VInput.vue_vue_type_script_setup_true_lang-O9gq6JhU.js";import"./PlusIcon-OCicvRBO.js";import"./generated-Ca4FKDe-.js";function de(g,r){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function me(g,r){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function R(g,r){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function _e(g,r){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}const pe=U({__name:"VAlert",props:{type:{}},setup(g){return(r,b)=>(s(),l("div",{class:S(["flex gap-2 rounded-lg p-3",{"bg-blue-50 text-blue-800":r.type==="info","bg-green-50 text-green-800":r.type==="success","bg-orange-50 text-orange-800":r.type==="warning","bg-red-50 text-red-800":r.type==="danger"}])},[r.type==="info"?(s(),k(n(_e),{key:0,class:"mt-0.5 size-5 shrink-0"})):x("",!0),r.type==="success"?(s(),k(n(se),{key:1,class:"mt-0.5 size-5 shrink-0"})):r.type==="warning"?(s(),k(n(me),{key:2,class:"mt-0.5 size-5 shrink-0"})):r.type==="danger"?(s(),k(n(R),{key:3,class:"mt-0.5 size-5 shrink-0"})):x("",!0),o("div",null,[Y(r.$slots,"default")])],2))}}),Q=U({__name:"DressingTag",props:{dressing:{}},setup(g){return(r,b)=>(s(),k(oe,{variant:"unstyled",class:S(n(ie)(r.dressing.color).container)},{default:_(()=>[i(re,{class:"size-5"}),C(" "+a(r.dressing.name),1)]),_:1},8,["class"]))}}),ge=({min:g,current:r,available:b})=>{const h=Z({}),F=e=>{var m;return(m=p(h)[e.clothes_category_id])==null?void 0:m.has(e.id)},q=e=>{var m,M;(m=p(h))[M=e.clothes_category_id]??(m[M]=new Set),F(e)?p(h)[e.clothes_category_id].delete(e.id):p(h)[e.clothes_category_id].add(e.id)},v=e=>{var m;return((m=p(h)[e])==null?void 0:m.size)??0},H=()=>Object.values(p(h)).flatMap(e=>[...e]),z=e=>Number.parseInt(e),f=e=>p(g)[e]-(p(r)[e]??0),I=e=>f(e)>0,$=e=>p(b)[e]>=f(e),L=e=>$(e)?v(e)>=f(e):v(e)===p(b)[e],O=j(()=>Object.keys(p(g)).map(e=>$(z(e)))),A=j(()=>Object.keys(p(g)).map(e=>z(e)).filter(e=>I(e))),E=j(()=>Object.keys(p(g)).map(e=>f(z(e)))),W=j(()=>{let e=0,m=0;return Object.values(p(g)).forEach(M=>{m++,M===0&&e++}),100*e/Math.max(m,1)});return{selectedClothesId:h,isClothingSelected:F,toggleClothingSelection:q,computeSelectedClothesId:H,selectedCountForCategory:v,categoryFromString:z,missingCountForCategory:f,isCategoryIncomplete:I,isCategoryCompletedWithSelection:L,canCategoryBeCompleted:$,canAllCategoriesBeCompleted:O,missingCountByCategory:E,incompleteCategories:A,percentageOfMinNotDefined:W}},he={class:"mb-4 flex text-sm"},fe={class:"sr-only"},ve={class:"text-sm text-neutral-500"},ye={class:"text-xl"},Ce={class:"mt-2 font-bold"},ke={class:"text-xl font-semibold leading-tight text-gray-800"},be={class:"mt-2 flex items-center gap-2"},we={class:"mx-auto mt-auto flex w-full max-w-lg flex-col"},$e={class:"text-xl"},Be={key:0,class:"mb-32 mt-4 flex flex-col gap-4"},xe={class:"flex items-center gap-2"},ze={key:1,class:"mb-32 mt-4 list-inside list-disc space-y-2 pl-2"},Me={class:"fixed bottom-0 left-0 flex w-full flex-col gap-2 rounded-t-2xl bg-white px-4 py-4 shadow-2xl"},De={class:"text-xl"},Se=["innerHTML"],je={class:"mt-4 list-inside list-disc space-y-2 pl-2"},Ie={key:1},Oe={class:"text-xl"},Fe={key:0,class:"mt-4 list-inside list-disc space-y-2 pl-2"},Ve={class:"mt-auto text-xl"},Ne={class:"ms-1 mt-2 list-inside list-disc"},Ze={class:"mt-2 grid grid-cols-2 gap-2 pb-8"},qe={class:"sticky bottom-0 z-20 mt-auto w-full pb-4"},tt=U({__name:"Show",props:{originDressing:{},destinationDressing:{},clothesCountByCategoryInDestination:{},clothesMinByCategoryInDestination:{},clothesByCategoryAtOrigin:{}},setup(g){const r=g,b=Z(!1),h=Z(r.clothesMinByCategoryInDestination),F=()=>{b.value=!1},q=()=>{b.value=!1,h.value=r.clothesMinByCategoryInDestination},v=ue(),H=j(()=>Object.fromEntries(Object.entries(r.clothesByCategoryAtOrigin).map(([t,V])=>[t,V.length]))),{computeSelectedClothesId:z,incompleteCategories:f,missingCountForCategory:I,canCategoryBeCompleted:$,toggleClothingSelection:L,isClothingSelected:O,selectedCountForCategory:A,isCategoryCompletedWithSelection:E,percentageOfMinNotDefined:W}=ge({min:h,current:r.clothesCountByCategoryInDestination,available:H}),e=()=>{J.post(route("clothes.move.store",[r.originDressing,r.destinationDressing]),{clothes_id:z()})},m=()=>{u.value==="setup"?u.value="recap-start":u.value==="recap-start"?u.value=0:u.value===f.value.length-1?u.value="recap-end":u.value!=="recap-end"&&u.value++},M=()=>{u.value==="recap-end"?u.value=f.value.length-1:u.value===0?u.value="recap-start":u.value==="recap-start"?u.value="setup":u.value=="setup"?J.visit(route("suitcase.index")):u.value--},u=Z("setup"),y=j(()=>{if(u.value==="setup"||u.value==="recap-start"||u.value==="recap-end")return null;const t=f.value[u.value];if(!t)throw new Error("undefined category");return{step:u.value+1,totalSteps:f.value.length,category:t,clothes:r.clothesByCategoryAtOrigin[t],canBeCompleted:$(t),missingCount:I(t)}});return(t,V)=>(s(),l(d,null,[i(n(ee),{title:t.$t("dplacer_des_vtements")},null,8,["title"]),i(ne,null,{header:_(()=>[o("div",he,[o("button",{onClick:M,class:"-m-2 flex items-center gap-1 p-2"},[i(n(de),{class:"size-4"}),C(" "+a(t.$t("prcdent")),1)]),i(n(te),{href:t.route("suitcase.index"),class:"-m-2 ml-auto flex items-center gap-1 p-2"},{default:_(()=>[o("span",fe,a(t.$t("quitter")),1),i(n(K),{class:"size-5"})]),_:1},8,["href"])]),y.value?(s(),l(d,{key:0},[o("p",ve,a(t.$t("etape_n_sur_total",{n:y.value.step,total:y.value.totalSteps}))+" - "+a(n(v).nameFromId(y.value.category)),1),o("h3",ye,a(t.$t("slectionne_n_clothing",{n:y.value.missingCount,clothing:n(v).nameFromId(y.value.category).toLowerCase()})),1),y.value.canBeCompleted?x("",!0):(s(),k(pe,{key:0,type:"warning",class:"mt-2"},{default:_(()=>[o("p",null,a(t.$t("il_ny_a_pas_assez_de_clothing_dans_ce_dressing",{clothing:n(v).nameFromId(y.value.category).toLowerCase()})),1),o("p",Ce,a(t.$t("si_tous_tes_vtements_sont_bien_sur_lapplication_pr")),1)]),_:1}))],64)):(s(),l(d,{key:1},[o("h2",ke,a(t.$t("faire_ma_valise")),1),i(P,{href:t.route("suitcase.index"),"sr-text":t.$t("modifier_lorigine_ou_la_destination")},{default:_(()=>[o("div",be,[i(Q,{dressing:t.originDressing},null,8,["dressing"]),i(n(T),{class:"size-5"}),i(Q,{dressing:t.destinationDressing},null,8,["dressing"])])]),_:1},8,["href","sr-text"])],64))]),default:_(()=>{var G;return[o("div",we,[u.value==="setup"?(s(),l(d,{key:0},[o("h3",$e,a(t.$t("ce_quil_faut_l_o_tu_vas_auminimum")),1),b.value?(s(),l("div",Be,[(s(!0),l(d,null,D(n(v).allWithoutUncategorized,({name:c,id:w})=>(s(),l("label",xe,[i(ae,{min:0,modelValue:h.value[w],"onUpdate:modelValue":X=>h.value[w]=X},null,8,["modelValue","onUpdate:modelValue"]),o("span",null,a(c),1)]))),256))])):(s(),l("ul",ze,[(s(!0),l(d,null,D(n(v).allWithoutUncategorized,({name:c,id:w})=>(s(),l("li",null,[o("span",null,a(h.value[w])+" "+a(c),1)]))),256))])),o("div",Me,[b.value?(s(),l(d,{key:0},[i(B,{variant:"tertiary",onClick:q},{default:_(()=>[i(n(K),{class:"size-5"}),C(" "+a(t.$t("annuler")),1)]),_:1}),i(B,{variant:"success",onClick:F},{default:_(()=>[i(n(N),{class:"size-5"}),C(" "+a(t.$t("enregistrer")),1)]),_:1})],64)):(s(),l(d,{key:1},[i(B,{variant:"secondary",onClick:V[0]||(V[0]=c=>b.value=!0)},{default:_(()=>[C(a(t.$t("modifier_pour_cette_foisci"))+" ",1),i(n(ce),{class:"size-5"})]),_:1}),i(B,{onClick:m},{default:_(()=>[C(a(t.$t("continuer_avec_a"))+" ",1),i(n(T),{class:"size-5"})]),_:1})],64))])],64)):u.value==="recap-start"?(s(),l(d,{key:1},[n(f).length?(s(),l(d,{key:0},[o("h3",De,a(t.$t("ce_quil_faut_mettre_dans_ta_valise")),1),o("p",{class:"mt-2",innerHTML:t.$t("selon_le_minimum_par_catgorie_que_tu_as_configur_i")},null,8,Se),o("ul",je,[(s(!0),l(d,null,D(n(f),c=>{var w;return s(),l("li",null,[o("span",{class:S(n($)(c)||"font-bold text-orange-600")},[n($)(c)?x("",!0):(s(),k(n(R),{key:0,class:"me-1 inline size-5 stroke-2 align-text-bottom"})),o("span",null,a(n(I)(c))+" "+a(n(v).nameFromId(c)),1),n($)(c)?x("",!0):(s(),l("span",Ie," ("+a(t.$t("tu_nen_as_que_n",((w=t.clothesByCategoryAtOrigin[c])==null?void 0:w.length)??0))+") ",1))],2)])}),256))]),i(B,{class:"mt-4",onClick:m},{default:_(()=>[C(a(t.$t("je_commence_ma_valise")),1)]),_:1})],64)):(s(),l(d,{key:1},[o("h3",Oe,a(t.$t("tu_as_dj_tout_ce_quil_faut_lbas")),1),Object.entries(t.clothesCountByCategoryInDestination).length?(s(),l("ul",Fe,[(s(!0),l(d,null,D(Object.entries(t.clothesCountByCategoryInDestination),([c,w])=>(s(),l("li",null,a(w)+" "+a(n(v).nameFromId(Number.parseInt(c))),1))),256))])):x("",!0),i(B,{class:"mt-4",href:t.route("dressings.show",t.destinationDressing)},{default:_(()=>[C(a(t.$t("voir_le_dressing")),1)]),_:1},8,["href"])],64))],64)):u.value==="recap-end"?(s(),l(d,{key:2},[o("h3",Ve,a(t.$t("ce_quil_y_a_dans_ta_valise")),1),o("ul",Ne,[(s(!0),l(d,null,D(n(f),c=>(s(),l("li",null,[o("span",{class:S(n($)(c)||"font-bold text-orange-600")},a(n(A)(c))+" "+a(n(v).nameFromId(c)),3)]))),256))]),i(B,{class:"mt-4",onClick:e},{default:_(()=>[C(a(t.$t("terminer_la_valise"))+" ",1),i(n(N),{class:"size-5"})]),_:1})],64)):y.value?(s(),l(d,{key:3},[o("div",Ze,[(s(!0),l(d,null,D(y.value.clothes,c=>(s(),k(P,{"sr-text":t.$t("voir_le_dtail"),onClick:w=>n(L)(c),class:S(["shrink-0 overflow-hidden rounded-xl border-4",n(O)(c)?"border-amber-500":"border-transparent"])},{default:_(()=>[i(le,{clothing:c},null,8,["clothing"]),o("div",{class:S(["absolute right-1 top-1 size-6 rounded-full border p-0.5",n(O)(c)?"border-amber-500 bg-amber-500 text-amber-100":"border-neutral-200 bg-neutral-100"])},[n(O)(c)?(s(),k(n(N),{key:0,class:"size-full"})):x("",!0)],2)]),_:2},1032,["sr-text","onClick","class"]))),256))]),o("div",qe,[(G=y.value.clothes)!=null&&G.length?(s(),k(B,{key:1,disabled:!n(E)(y.value.category),class:"w-full",onClick:m},{default:_(()=>[C(a(t.$t("cest_dans_ma_valise"))+" ",1),i(n(N),{class:"size-5"})]),_:1},8,["disabled"])):(s(),k(B,{key:0,class:"w-full",onClick:m},{default:_(()=>[C(a(t.$t("suivant"))+" ",1),i(n(T),{class:"size-5"})]),_:1}))])],64)):x("",!0)])]}),_:1})],64))}});export{tt as default};
